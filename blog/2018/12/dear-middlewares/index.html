<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/component---src-templates-post-js.d1f0d49507b56cab667c.css">footer{background-color:#fff}.footer-left-panel{float:left;text-align:left}.footer-right-panel{float:right;text-align:right}@media only screen and (max-width:768px){.footer-left-panel{text-align:center;padding:1rem}.footer-right-panel{text-align:center;padding:.5rem}}.inlineListItem{display:inline-block;margin-right:.5em;margin-left:.5em}.unorderedList{list-style:none;margin:0;padding:0}.unorderedList .inlineListItem:first-child{margin-left:0}.layoutColumn{padding:1em}.midSection{padding:1em 0}.layoutRow{width:100%;max-width:65em;margin-left:auto;margin-right:auto}.layoutRow:after,.layoutRow:before{content:" ";display:table}.layoutRow:after{clear:both}.badge{color:rgba(0,0,0,.68);background:rgba(0,0,0,.05);margin:0 0 .5rem .5rem;border-radius:5px;display:inline-block;padding:.2em .6em}.tag{font-size:85%;font-weight:600;vertical-align:baseline;text-decoration:none}.dimText{color:#777}.trophy{transition:.2s linear;transition-property:text-shadow,color,opacity,-webkit-transform;transition-property:text-shadow,color,opacity,transform;transition-property:text-shadow,color,opacity,transform,-webkit-transform}.specialText,.trophy{color:#ffca22}.postPreview{display:flex;align-items:stretch;flex:1 1 auto;width:100%}.postPreviewHeading{margin:.2rem 0}.postPreviewExcerpt{margin:1rem 0}.postPreviewThumbnail{width:152px}.leftRoundedImage{border-radius:0 5px 5px 0}@media screen and (max-width:855px){.postPreview{max-width:100%}.postPreviewThumbnail{width:140px}}@media screen and (max-width:503px){.postPreviewThumbnail{width:80px;height:72px}}.flex0{flex:0 0 auto}.flex1{flex:1 1 auto}.backgroundCover{background-position:43% 56%!important;background-position:50%!important;background-origin:border-box!important;background-size:cover!important}.sizeFull{width:100%!important;height:100%!important}.postTOC>ul{list-style:none;padding:0}.postTOC>ul>li:before{content:"\2022";margin:0 1rem 0 0}.postTOC>ul>li>p{display:inline}.postTOC>ul>li>ul{list-style:none;padding:0 2rem}.postTOC>ul>li>ul>li:before{content:"\25AA";margin:0 1rem 0 0}@media (min-width:992px){.stickySidebar{position:-webkit-sticky;position:sticky;top:4em;overflow-y:auto}}.fixedHeader{height:54px;position:fixed;top:0;width:100%;z-index:9999;background:#041f43}.nav-title{line-height:54px;font-family:monospace;font-size:120%;font-weight:600;float:left;padding:0 2rem}.nav-title>a{color:#fff;text-decoration:none}.nav-title>a:hover{color:#fff}.nav{height:54px;width:100%;position:relative}.nav>.nav-header{display:inline}.nav>.nav-header>.nav-title{display:inline-block;color:#fff}.nav>.nav-btn{display:none}.nav>.nav-links{float:right;background:#041f43;padding:0 2rem}.nav>.nav-links>a{line-height:54px;display:inline-block;text-decoration:none;color:#fff;padding:0 1.2rem}.nav>.nav-links>a:hover{background-color:rgba(0,0,0,.3)}.nav>#nav-check{display:none}@media (max-width:600px){.nav>.nav-btn{display:inline-block;position:absolute;right:0;top:0}.nav>.nav-btn>label{color:#fff;line-height:54px;text-align:center;display:inline-block;width:54px;height:54px}.nav>.nav-btn>label:hover{background-color:rgba(0,0,0,.3)}.nav>.nav-btn>label>span{display:block;width:25px;height:10px;border-top:2px solid #eee}.nav>.nav-links{position:absolute;display:block;width:100%;height:0;transition:all .3s ease-in;overflow-y:hidden;top:54px;left:0;padding:0}.nav>.nav-links>a{display:block;width:100%;padding:0 1.5rem}.nav>#nav-check:not(:checked)+.nav-links{height:0}.nav>#nav-check:checked+.nav-links{height:calc(100vh - 54px);overflow-y:auto}}.Demo__some-network{vertical-align:top;display:inline-block;margin-right:8px;text-align:center}.Demo__some-network__share-count{margin-top:3px;font-size:12px}.Demo__some-network__share-button{cursor:pointer}.Demo__some-network__share-button:hover:not(:active){opacity:.75}.shareIcon{font-size:2rem;padding:1rem}</style><style data-href="/app.4dfccad11c1e34419570.css">@import url(https://fonts.googleapis.com/css?family=Lato|Oswald:700|Open+Sans:400,700);@import url(https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css);
/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2018 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*!
 * Generated using the Bootstrap Customizer (<none>)
 * Config saved to config.json and <none>
 *//*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 *//*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}*,:after,:before{box-sizing:border-box}html{font-size:10px;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;line-height:1.42857143;color:#333;background-color:#fff}button,input,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}a{color:#337ab7}a:focus,a:hover{color:#23527c;text-decoration:underline}a:focus{outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}figure{margin:0}img{vertical-align:middle}.img-responsive{display:block;max-width:100%;height:auto}.img-rounded{border-radius:6px}.img-thumbnail{padding:4px;line-height:1.42857143;background-color:#fff;border:1px solid #ddd;border-radius:4px;transition:all .2s ease-in-out;display:inline-block;max-width:100%;height:auto}.img-circle{border-radius:50%}hr{margin-top:20px;margin-bottom:20px;border:0;border-top:1px solid #eee}.sr-only{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;margin:0;overflow:visible;clip:auto}[role=button]{cursor:pointer}.container{margin-right:auto;margin-left:auto;padding-left:15px;padding-right:15px}@media (min-width:768px){.container{width:750px}}@media (min-width:992px){.container{width:970px}}@media (min-width:1200px){.container{width:1170px}}.container-fluid{margin-right:auto;margin-left:auto;padding-left:15px;padding-right:15px}.row{margin-left:-15px;margin-right:-15px}.col-lg-1,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-11,.col-lg-12,.col-md-1,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-10,.col-md-11,.col-md-12,.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12,.col-xs-1,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-10,.col-xs-11,.col-xs-12{position:relative;min-height:1px;padding-left:15px;padding-right:15px}.col-xs-1,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-10,.col-xs-11,.col-xs-12{float:left}.col-xs-12{width:100%}.col-xs-11{width:91.66666667%}.col-xs-10{width:83.33333333%}.col-xs-9{width:75%}.col-xs-8{width:66.66666667%}.col-xs-7{width:58.33333333%}.col-xs-6{width:50%}.col-xs-5{width:41.66666667%}.col-xs-4{width:33.33333333%}.col-xs-3{width:25%}.col-xs-2{width:16.66666667%}.col-xs-1{width:8.33333333%}.col-xs-pull-12{right:100%}.col-xs-pull-11{right:91.66666667%}.col-xs-pull-10{right:83.33333333%}.col-xs-pull-9{right:75%}.col-xs-pull-8{right:66.66666667%}.col-xs-pull-7{right:58.33333333%}.col-xs-pull-6{right:50%}.col-xs-pull-5{right:41.66666667%}.col-xs-pull-4{right:33.33333333%}.col-xs-pull-3{right:25%}.col-xs-pull-2{right:16.66666667%}.col-xs-pull-1{right:8.33333333%}.col-xs-pull-0{right:auto}.col-xs-push-12{left:100%}.col-xs-push-11{left:91.66666667%}.col-xs-push-10{left:83.33333333%}.col-xs-push-9{left:75%}.col-xs-push-8{left:66.66666667%}.col-xs-push-7{left:58.33333333%}.col-xs-push-6{left:50%}.col-xs-push-5{left:41.66666667%}.col-xs-push-4{left:33.33333333%}.col-xs-push-3{left:25%}.col-xs-push-2{left:16.66666667%}.col-xs-push-1{left:8.33333333%}.col-xs-push-0{left:auto}.col-xs-offset-12{margin-left:100%}.col-xs-offset-11{margin-left:91.66666667%}.col-xs-offset-10{margin-left:83.33333333%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-8{margin-left:66.66666667%}.col-xs-offset-7{margin-left:58.33333333%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-5{margin-left:41.66666667%}.col-xs-offset-4{margin-left:33.33333333%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-2{margin-left:16.66666667%}.col-xs-offset-1{margin-left:8.33333333%}.col-xs-offset-0{margin-left:0}@media (min-width:768px){.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12{float:left}.col-sm-12{width:100%}.col-sm-11{width:91.66666667%}.col-sm-10{width:83.33333333%}.col-sm-9{width:75%}.col-sm-8{width:66.66666667%}.col-sm-7{width:58.33333333%}.col-sm-6{width:50%}.col-sm-5{width:41.66666667%}.col-sm-4{width:33.33333333%}.col-sm-3{width:25%}.col-sm-2{width:16.66666667%}.col-sm-1{width:8.33333333%}.col-sm-pull-12{right:100%}.col-sm-pull-11{right:91.66666667%}.col-sm-pull-10{right:83.33333333%}.col-sm-pull-9{right:75%}.col-sm-pull-8{right:66.66666667%}.col-sm-pull-7{right:58.33333333%}.col-sm-pull-6{right:50%}.col-sm-pull-5{right:41.66666667%}.col-sm-pull-4{right:33.33333333%}.col-sm-pull-3{right:25%}.col-sm-pull-2{right:16.66666667%}.col-sm-pull-1{right:8.33333333%}.col-sm-pull-0{right:auto}.col-sm-push-12{left:100%}.col-sm-push-11{left:91.66666667%}.col-sm-push-10{left:83.33333333%}.col-sm-push-9{left:75%}.col-sm-push-8{left:66.66666667%}.col-sm-push-7{left:58.33333333%}.col-sm-push-6{left:50%}.col-sm-push-5{left:41.66666667%}.col-sm-push-4{left:33.33333333%}.col-sm-push-3{left:25%}.col-sm-push-2{left:16.66666667%}.col-sm-push-1{left:8.33333333%}.col-sm-push-0{left:auto}.col-sm-offset-12{margin-left:100%}.col-sm-offset-11{margin-left:91.66666667%}.col-sm-offset-10{margin-left:83.33333333%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-8{margin-left:66.66666667%}.col-sm-offset-7{margin-left:58.33333333%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-5{margin-left:41.66666667%}.col-sm-offset-4{margin-left:33.33333333%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-2{margin-left:16.66666667%}.col-sm-offset-1{margin-left:8.33333333%}.col-sm-offset-0{margin-left:0}}@media (min-width:992px){.col-md-1,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-10,.col-md-11,.col-md-12{float:left}.col-md-12{width:100%}.col-md-11{width:91.66666667%}.col-md-10{width:83.33333333%}.col-md-9{width:75%}.col-md-8{width:66.66666667%}.col-md-7{width:58.33333333%}.col-md-6{width:50%}.col-md-5{width:41.66666667%}.col-md-4{width:33.33333333%}.col-md-3{width:25%}.col-md-2{width:16.66666667%}.col-md-1{width:8.33333333%}.col-md-pull-12{right:100%}.col-md-pull-11{right:91.66666667%}.col-md-pull-10{right:83.33333333%}.col-md-pull-9{right:75%}.col-md-pull-8{right:66.66666667%}.col-md-pull-7{right:58.33333333%}.col-md-pull-6{right:50%}.col-md-pull-5{right:41.66666667%}.col-md-pull-4{right:33.33333333%}.col-md-pull-3{right:25%}.col-md-pull-2{right:16.66666667%}.col-md-pull-1{right:8.33333333%}.col-md-pull-0{right:auto}.col-md-push-12{left:100%}.col-md-push-11{left:91.66666667%}.col-md-push-10{left:83.33333333%}.col-md-push-9{left:75%}.col-md-push-8{left:66.66666667%}.col-md-push-7{left:58.33333333%}.col-md-push-6{left:50%}.col-md-push-5{left:41.66666667%}.col-md-push-4{left:33.33333333%}.col-md-push-3{left:25%}.col-md-push-2{left:16.66666667%}.col-md-push-1{left:8.33333333%}.col-md-push-0{left:auto}.col-md-offset-12{margin-left:100%}.col-md-offset-11{margin-left:91.66666667%}.col-md-offset-10{margin-left:83.33333333%}.col-md-offset-9{margin-left:75%}.col-md-offset-8{margin-left:66.66666667%}.col-md-offset-7{margin-left:58.33333333%}.col-md-offset-6{margin-left:50%}.col-md-offset-5{margin-left:41.66666667%}.col-md-offset-4{margin-left:33.33333333%}.col-md-offset-3{margin-left:25%}.col-md-offset-2{margin-left:16.66666667%}.col-md-offset-1{margin-left:8.33333333%}.col-md-offset-0{margin-left:0}}@media (min-width:1200px){.col-lg-1,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-11,.col-lg-12{float:left}.col-lg-12{width:100%}.col-lg-11{width:91.66666667%}.col-lg-10{width:83.33333333%}.col-lg-9{width:75%}.col-lg-8{width:66.66666667%}.col-lg-7{width:58.33333333%}.col-lg-6{width:50%}.col-lg-5{width:41.66666667%}.col-lg-4{width:33.33333333%}.col-lg-3{width:25%}.col-lg-2{width:16.66666667%}.col-lg-1{width:8.33333333%}.col-lg-pull-12{right:100%}.col-lg-pull-11{right:91.66666667%}.col-lg-pull-10{right:83.33333333%}.col-lg-pull-9{right:75%}.col-lg-pull-8{right:66.66666667%}.col-lg-pull-7{right:58.33333333%}.col-lg-pull-6{right:50%}.col-lg-pull-5{right:41.66666667%}.col-lg-pull-4{right:33.33333333%}.col-lg-pull-3{right:25%}.col-lg-pull-2{right:16.66666667%}.col-lg-pull-1{right:8.33333333%}.col-lg-pull-0{right:auto}.col-lg-push-12{left:100%}.col-lg-push-11{left:91.66666667%}.col-lg-push-10{left:83.33333333%}.col-lg-push-9{left:75%}.col-lg-push-8{left:66.66666667%}.col-lg-push-7{left:58.33333333%}.col-lg-push-6{left:50%}.col-lg-push-5{left:41.66666667%}.col-lg-push-4{left:33.33333333%}.col-lg-push-3{left:25%}.col-lg-push-2{left:16.66666667%}.col-lg-push-1{left:8.33333333%}.col-lg-push-0{left:auto}.col-lg-offset-12{margin-left:100%}.col-lg-offset-11{margin-left:91.66666667%}.col-lg-offset-10{margin-left:83.33333333%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-8{margin-left:66.66666667%}.col-lg-offset-7{margin-left:58.33333333%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-5{margin-left:41.66666667%}.col-lg-offset-4{margin-left:33.33333333%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-2{margin-left:16.66666667%}.col-lg-offset-1{margin-left:8.33333333%}.col-lg-offset-0{margin-left:0}}.clearfix:after,.clearfix:before,.container-fluid:after,.container-fluid:before,.container:after,.container:before,.row:after,.row:before{content:" ";display:table}.clearfix:after,.container-fluid:after,.container:after,.row:after{clear:both}.center-block{display:block;margin-left:auto;margin-right:auto}.pull-right{float:right!important}.pull-left{float:left!important}.hide{display:none!important}.show{display:block!important}.invisible{visibility:hidden}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.hidden{display:none!important}.affix{position:fixed}@-ms-viewport{width:device-width}.visible-lg,.visible-lg-block,.visible-lg-inline,.visible-lg-inline-block,.visible-md,.visible-md-block,.visible-md-inline,.visible-md-inline-block,.visible-sm,.visible-sm-block,.visible-sm-inline,.visible-sm-inline-block,.visible-xs,.visible-xs-block,.visible-xs-inline,.visible-xs-inline-block{display:none!important}@media (max-width:767px){.visible-xs{display:block!important}table.visible-xs{display:table!important}tr.visible-xs{display:table-row!important}td.visible-xs,th.visible-xs{display:table-cell!important}}@media (max-width:767px){.visible-xs-block{display:block!important}}@media (max-width:767px){.visible-xs-inline{display:inline!important}}@media (max-width:767px){.visible-xs-inline-block{display:inline-block!important}}@media (min-width:768px) and (max-width:991px){.visible-sm{display:block!important}table.visible-sm{display:table!important}tr.visible-sm{display:table-row!important}td.visible-sm,th.visible-sm{display:table-cell!important}}@media (min-width:768px) and (max-width:991px){.visible-sm-block{display:block!important}}@media (min-width:768px) and (max-width:991px){.visible-sm-inline{display:inline!important}}@media (min-width:768px) and (max-width:991px){.visible-sm-inline-block{display:inline-block!important}}@media (min-width:992px) and (max-width:1199px){.visible-md{display:block!important}table.visible-md{display:table!important}tr.visible-md{display:table-row!important}td.visible-md,th.visible-md{display:table-cell!important}}@media (min-width:992px) and (max-width:1199px){.visible-md-block{display:block!important}}@media (min-width:992px) and (max-width:1199px){.visible-md-inline{display:inline!important}}@media (min-width:992px) and (max-width:1199px){.visible-md-inline-block{display:inline-block!important}}@media (min-width:1200px){.visible-lg{display:block!important}table.visible-lg{display:table!important}tr.visible-lg{display:table-row!important}td.visible-lg,th.visible-lg{display:table-cell!important}}@media (min-width:1200px){.visible-lg-block{display:block!important}}@media (min-width:1200px){.visible-lg-inline{display:inline!important}}@media (min-width:1200px){.visible-lg-inline-block{display:inline-block!important}}@media (max-width:767px){.hidden-xs{display:none!important}}@media (min-width:768px) and (max-width:991px){.hidden-sm{display:none!important}}@media (min-width:992px) and (max-width:1199px){.hidden-md{display:none!important}}@media (min-width:1200px){.hidden-lg{display:none!important}}.visible-print{display:none!important}@media print{.visible-print{display:block!important}table.visible-print{display:table!important}tr.visible-print{display:table-row!important}td.visible-print,th.visible-print{display:table-cell!important}}.visible-print-block{display:none!important}@media print{.visible-print-block{display:block!important}}.visible-print-inline{display:none!important}@media print{.visible-print-inline{display:inline!important}}.visible-print-inline-block{display:none!important}@media print{.visible-print-inline-block{display:inline-block!important}}@media print{.hidden-print{display:none!important}}body{font-family:Lato,Open Sans,HelveticaNeue,Helvetica Neue,Helvetica,Arial,sans-serif}.indexRoot{padding:2em 1em}@media (min-width:1024px){.indexRoot{padding:4em 0}}@media (min-width:768px) and (max-width:1024px){.indexRoot{padding:3em 1em}}@media (min-width:480px) and (max-width:768px){.indexRoot{padding:3em 1em}}@media (max-width:480px){.indexRoot{padding:2em 1em}}.cryptedmail:after{content:"mehamasum@gmail.com"}h1{font-family:Oswald,Georgia,Times New Roman,serif;color:#3c78d8}section>h1{font-size:1.4em;line-height:120%;text-transform:uppercase}section{margin-bottom:2em}section>article>section{margin:0}section>article>section>strong{margin-right:.5em;color:#646464}section>article{margin-bottom:1em}article>header>h1{font-family:Open Sans,HelveticaNeue,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:1.2em;font-weight:700;line-height:150%;margin-bottom:0;color:inherit}article>header>span+span{margin-left:2px}article>header>span+span:before{content:" ";margin-right:4px}article>header>span{color:#a8a8a8;font-size:100%}article>header address{display:inline}article>header address+time{margin-left:6px}article>header address+time:before{content:"\2014";margin-right:6px}.row{margin-left:0;margin-right:0}#___gatsby,#___gatsby>*{width:100%}blockquote{background-color:#ecf4f9;border-left:8px solid #cbddea;padding:1em 2em 1em 1em;color:#6a737d;margin:0 0 1em}.rc-collapse{border:none!important;background-color:inherit!important}.rc-collapse>.rc-collapse-item{border-top:0!important}.rc-collapse-content{background-color:inherit!important}hr{border-top:2px solid #e7e9ee}a{text-decoration:none;color:#3c78d8;transition:all .5s ease}a:hover{color:#264a85}a:visited{color:#463cd8}</style><meta name="generator" content="Gatsby 2.0.78"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="shortcut icon" href="/icons/icon-48x48.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#3c78d8"/><title data-react-helmet="true">Lets know redux middlewares better - Meha Masum - Learning in public</title><meta data-react-helmet="true" name="description" content="Does redux middleware confuse you? Take a deep breath and read on."/><meta data-react-helmet="true" name="image" content="https://mehamasum.github.io/images/posts/redux.png"/><meta data-react-helmet="true" name="apple-mobile-web-app-title" content="Meha Masum"/><meta data-react-helmet="true" name="application-name" content="Meha Masum"/><meta data-react-helmet="true" property="fb:app_id" content="575960529519073"/><meta data-react-helmet="true" property="og:url" content="https://mehamasum.github.io/blog/2018/12/dear-middlewares/"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Lets know redux middlewares better - Meha Masum - Learning in public"/><meta data-react-helmet="true" property="og:description" content="Does redux middleware confuse you? Take a deep breath and read on."/><meta data-react-helmet="true" property="og:image" content="https://mehamasum.github.io/images/posts/redux.png"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:site" content="@mehamasum"/><meta data-react-helmet="true" name="twitter:creator" content="@mehamasum"/><meta data-react-helmet="true" name="twitter:title" content="Lets know redux middlewares better - Meha Masum - Learning in public"/><meta data-react-helmet="true" name="twitter:description" content="Does redux middleware confuse you? Take a deep breath and read on."/><meta data-react-helmet="true" name="twitter:image" content="https://mehamasum.github.io/images/posts/redux.png"/><meta data-react-helmet="true" name="twitter:image:alt" content="Lets know redux middlewares better - Meha Masum - Learning in public"/><script data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","@id":"https://mehamasum.github.io","url":"https://mehamasum.github.io","alternateName":"Meha Masum"}]</script><script data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"BlogPosting","@id":"https://mehamasum.github.io/blog/2018/12/dear-middlewares/","url":"https://mehamasum.github.io/blog/2018/12/dear-middlewares/","name":"Lets know redux middlewares better - Meha Masum - Learning in public","alternateName":"Meha Masum","headline":"Lets know redux middlewares better - Meha Masum - Learning in public","image":{"@type":"ImageObject","url":"https://mehamasum.github.io/images/posts/redux.png"},"description":"Does redux middleware confuse you? Take a deep breath and read on.","datePublished":"2019-03-22","dateModified":"2019-03-22","author":{"@type":"Person","name":"Meha Masum"},"publisher":{"@type":"Organization","name":"Meha Masum","logo":{"@type":"ImageObject","url":"https://mehamasum.github.io/images/meta/favicon.png"}},"isPartOf":"https://mehamasum.github.io","mainEntityOfPage":{"@type":"WebSite","@id":"https://mehamasum.github.io"}}]</script><link as="script" rel="preload" href="/webpack-runtime-0cc2b0296623acc76d5d.js"/><link as="script" rel="preload" href="/app-a25f4231e509debba9c9.js"/><link as="script" rel="preload" href="/0-54160a0a4e16653bd926.js"/><link as="script" rel="preload" href="/1-621ad53d2636efeb4f3f.js"/><link as="script" rel="preload" href="/14-8470f664f73d92ac0e2c.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-2e1e373cf9d1a9c55942.js"/><link as="fetch" rel="preload" href="/static/d/20/path---blog-2018-12-dear-middlewares-d-0-c-132-tkZQQzMsp4QdEdY82sABp9LEI.json" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><style>
          a {
            color: #337ab7;
          }
          a:hover,
          a:focus {
            color: #353a3e;
            text-decoration: underline;
            text-decoration-color: inherit;
          }

          .badge {
            color: rgba(0, 0, 0, 0.68);
            background: rgba(0, 0, 0, 0.05);
          }
        </style><style>
          /**
           * GHColors theme by Avi Aryan (http://aviaryan.in)
           * Inspired by Github syntax coloring
           */
          
          code[class*='language-'],
          pre[class*='language-'] {
            color: #393a34;
            font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier,
              monospace;
            direction: ltr;
            text-align: left;
            white-space: pre;
            word-spacing: normal;
            word-break: normal;
            font-size: 0.95em;
            line-height: 1.2em;
          
            -moz-tab-size: 4;
            -o-tab-size: 4;
            tab-size: 4;
          
            -webkit-hyphens: none;
            -moz-hyphens: none;
            -ms-hyphens: none;
            hyphens: none;
          }
          
          pre[class*='language-']::-moz-selection,
          pre[class*='language-'] ::-moz-selection,
          code[class*='language-']::-moz-selection,
          code[class*='language-'] ::-moz-selection {
            background: #b3d4fc;
          }
          
          pre[class*='language-']::selection,
          pre[class*='language-'] ::selection,
          code[class*='language-']::selection,
          code[class*='language-'] ::selection {
            background: #b3d4fc;
          }
          
          /* Code blocks */
          pre[class*='language-'] {
            padding: 1em;
            margin: 0.5em 0;
            overflow: auto;
            border: 1px solid #dddddd;
            background-color: white;
          }
          
          :not(pre) > code[class*='language-'],
          pre[class*='language-'] {
          }
          
          /* Inline code */
          :not(pre) > code[class*='language-'] {
            padding: 0.2em;
            padding-top: 1px;
            padding-bottom: 1px;
            background: #f7f7f9;
            color: #d72b3f;
            border: 1px solid #e1e1e8;
            border-radius: 5px;
          }
          
          .token.comment,
          .token.prolog,
          .token.doctype,
          .token.cdata {
            color: #999988;
            font-style: italic;
          }
          
          .token.namespace {
            opacity: 0.7;
          }
          
          .token.string,
          .token.attr-value {
            color: #e3116c;
          }
          .token.punctuation,
          .token.operator {
            color: #393a34; /* no highlight */
          }
          
          .token.entity,
          .token.url,
          .token.symbol,
          .token.number,
          .token.boolean,
          .token.variable,
          .token.constant,
          .token.property,
          .token.regex {
            color: #36acaa;
          }
          
          .token.inserted {
            color: green;
          }
          
          .token.atrule,
          .token.keyword,
          .token.attr-name,
          .language-autohotkey .token.selector {
            color: #00a4db;
          }
          
          .token.function,
          .token.deleted,
          .language-autohotkey .token.tag {
            color: #9a050f;
          }
          
          .token.tag,
          .token.selector,
          .language-autohotkey .token.keyword {
            color: #00009f;
          }
          
          .token.important,
          .token.function,
          .token.bold {
            font-weight: bold;
          }
          
          .token.italic {
            font-style: italic;
          }
          
          /* custom */
          
          .gatsby-highlight-code-line {
            background-color: rgba(240, 240, 240, 0.486);
            display: block;
            margin-right: -1em;
            margin-left: -1em;
            padding-right: 1em;
            padding-left: 0.75em;
            border-left: 0.25em solid #00c3ff;
          }
          
          .gatsby-highlight {
            margin-bottom: 1.75rem;
            border-radius: 10px;
            -webkit-overflow-scrolling: touch;
            overflow: auto;
          }
          
          .gatsby-highlight pre[class*='language-'] {
            float: left;
            min-width: 100%;
          }
          
        </style><div class="indexRoot" style="background:#ffffff;color:#000000;transition:color 0.5s ease-out, background 0.5s ease-out"><div class="container"><div class="row"><div class="stickySidebar col-md-3 col-md-offset-1 col-xs-12"><div style="position:relative;display:inline-block;text-align:left;opacity:1;border-radius:14px;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s;touch-action:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none"><div class="react-switch-bg" style="height:28px;width:56px;margin:0;position:relative;background:#888888;border-radius:14px;cursor:pointer;-webkit-transition:background 0.25s;-moz-transition:background 0.25s;transition:background 0.25s"><div style="height:28px;width:30px;position:relative;opacity:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><span class="emoji" role="img" aria-label="" aria-hidden="true" style="line-height:28px;margin-left:7px">üåô</span></div><div style="height:28px;width:30px;position:absolute;opacity:1;right:0;top:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><span class="emoji" role="img" aria-label="" aria-hidden="true" style="line-height:28px;margin-left:7px">‚òÄÔ∏è</span></div></div><div class="react-switch-handle" style="height:26px;width:26px;background:#ffffff;display:inline-block;cursor:pointer;border-radius:50%;position:absolute;transform:translateX(1px);top:1px;outline:0;box-shadow:0px 1px 5px rgba(0, 0, 0, 0.6);border:0;-webkit-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;-moz-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s"></div><input type="checkbox" role="switch" style="border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px"/></div><h1 style="font-size:2.5em"><a style="color:inherit" href="/blog">&lt;Learning in<br/>public/&gt;</a></h1><h3>Personal Blog by <a href="/">Meha Masum</a></h3><hr/><div><h4>Content</h4><div class="postTOC"><ul>
<li><a href="/blog/2018/12/dear-middlewares/#what-is-middleware-anyway">What is middleware, anyway?</a></li>
<li><a href="/blog/2018/12/dear-middlewares/#redux-middleware">Redux middleware</a></li>
<li>
<p><a href="/blog/2018/12/dear-middlewares/#writing-middleware-from-scratch">Writing middleware from scratch</a></p>
<ul>
<li><a href="/blog/2018/12/dear-middlewares/#chaining-middlewares">Chaining middlewares</a></li>
<li><a href="/blog/2018/12/dear-middlewares/#better-implementation">Better implementation</a></li>
<li><a href="/blog/2018/12/dear-middlewares/#reduxs-applymiddleware">Redux‚Äôs applyMiddleware()</a></li>
<li><a href="/blog/2018/12/dear-middlewares/#almost-there">Almost there</a></li>
<li><a href="/blog/2018/12/dear-middlewares/#we-must-return">We must return</a></li>
</ul>
</li>
<li><a href="/blog/2018/12/dear-middlewares/#further-reading">Further reading</a></li>
</ul></div></div></div><div class="col-md-7 col-xs-12"><div><h1 style="margin-bottom:0">Lets know redux middlewares better</h1><div style="display:block;margin:1em 0 2em">December 21, 2018<!-- --> in<!-- --> <a href="/blog/categories/General">General</a> ‚Ä¢ 9 min read</div></div><div style="font-size:1.2em"><div><p>This is a common structure of every redux middleware:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">middleware</span> <span class="token operator">=</span> store <span class="token operator">=></span> next <span class="token operator">=></span> action <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token operator">...</span>
    <span class="token operator">...</span>
    <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>When I first started, it really intimidated me- what‚Äôs with all those arrows? Then of course when I got to know them a little bit better, it was pretty clear. That‚Äôs what we will try to do in this post. We will start from ground up and reach that <code class="language-text">store =&gt; next =&gt; action =&gt;</code> thingy gradually.</p>
<p>If you are familiar with the concept of middleware you can skip the next section and go directly to <a href="#redux-middleware">Redux‚Äôs version of middleware</a>.</p>
<h2 id="what-is-middleware-anyway"><a href="#what-is-middleware-anyway" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is middleware, anyway?</h2>
<p>In general, middleware is some code you can put in between some other code (hence the name).</p>
<p>For example, when a server-side library receives a request at a particular endpoint, the associated ‚Äúview‚Äù function will generate a response in return. Now you may wish to ‚Äúlog‚Äù every request it receives. Instead of logging the request manually in each endpoint‚Äôs ‚Äúview‚Äù function, you can put a middleware in between the code of receiving a request and generating a response.</p>
<p>Similarly if you want to parse the ‚Äúbody‚Äù of the request you don‚Äôt want to do that in every function. You may add a middleware that parses the body of each request so that your ‚Äúview‚Äùs get already parsed (‚Äúready made‚Äù) body to work with.</p>
<p>Another popular use case would be, one middleware checks the authentication credentials of the request and put the user details in that ‚Äúrequest object‚Äù- so that every response generator function doesn‚Äôt have to make a DB call to find out who the request came from. There could be many more of these. And the best part is- you can chain them after one another. Here is a conceptual view:</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/344b2912c7f67e2f762cfa97cbc4701a/3ef6c/example.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 14.423076923076922%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAAi0lEQVQI102Niw7CIAxF9/+fueiMMt7YAkOuwJixSdO0OT13EX4DJwZxQiCGth7K+HbL46aMg9IWPhAoptGdMS4gHwWltFYbiljxIYfl5e7gTMi5DEhIjV1ZcOzCCDMC3BDGGWKch2whb4qIzDi6cJ9C/FWtdc5z10203h4j5CkkUhNeXGcu/vfQ6gv7sui/dnWv2wAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="example"
        title=""
        src="/static/344b2912c7f67e2f762cfa97cbc4701a/fb8a0/example.png"
        srcset="/static/344b2912c7f67e2f762cfa97cbc4701a/1a291/example.png 148w,
/static/344b2912c7f67e2f762cfa97cbc4701a/2bc4a/example.png 295w,
/static/344b2912c7f67e2f762cfa97cbc4701a/fb8a0/example.png 590w,
/static/344b2912c7f67e2f762cfa97cbc4701a/526de/example.png 885w,
/static/344b2912c7f67e2f762cfa97cbc4701a/3ef6c/example.png 1040w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<h2 id="redux-middleware"><a href="#redux-middleware" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Redux middleware</h2>
<blockquote>
<p>Redux middleware provides a third-party extension point between dispatching an action, and the moment it reaches the reducer.</p>
</blockquote>
<p>Let‚Äôs think about that for a minute. Like any other middleware, it sits between two points. In this case, between dispatching an action (<code class="language-text">store.dispatch</code> call) and the action reaching the reducers (for state update).</p>
<p>So here is a conceptual view:</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/0bb8698966e2249bef195754c5e0ccd7/89502/redux-middleware.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 13.043478260869565%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAAh0lEQVQI101OQQ7CMAzb/3+IxAEk2ARcika7tklqnDAQkazEruN0UhNstaFsDWoDooYmSl7xKhWdsxDeM7VMrXWh18Lr3Pc1J1i6YXqsM0orEVhbD7jB4bPoJywOkbuv7G9fj/Ejxgxj6IS9XPSrAS57zcsdh+MJV/bzZUF6rqH/fMQYA//1Blca6nXnRlqoAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="redux middleware"
        title=""
        src="/static/0bb8698966e2249bef195754c5e0ccd7/fb8a0/redux-middleware.png"
        srcset="/static/0bb8698966e2249bef195754c5e0ccd7/1a291/redux-middleware.png 148w,
/static/0bb8698966e2249bef195754c5e0ccd7/2bc4a/redux-middleware.png 295w,
/static/0bb8698966e2249bef195754c5e0ccd7/fb8a0/redux-middleware.png 590w,
/static/0bb8698966e2249bef195754c5e0ccd7/526de/redux-middleware.png 885w,
/static/0bb8698966e2249bef195754c5e0ccd7/89502/redux-middleware.png 1035w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>But why does it sit there? Consider these use cases:</p>
<ul>
<li>
<p>We want to log every action that is dispatched and how that action changed the state. That way, when something is wrong we can look back at our log and figure out which action is responsible for putting our app in a bad state. We have to put this logger between those two points to achieve this.</p>
</li>
<li>
<p>We want to have a common error catching logic for our app (and possibly send it to a crash reporting service).</p>
</li>
</ul>
<p>Now let‚Äôs forget everything about the <code class="language-text">store =&gt; next =&gt; action =&gt;</code> thing we saw before and try to write a redux middleware from scratch.</p>
<h2 id="writing-middleware-from-scratch"><a href="#writing-middleware-from-scratch" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Writing middleware from scratch</h2>
<p>Let‚Äôs say we want to have log functionality like this:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dispatching'</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span>
store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'new state'</span><span class="token punctuation">,</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<p>But we don‚Äôt want to write a bunch of <code class="language-text">console.log</code> every time we write a <code class="language-text">dispatch</code> call.</p>
<p>So what else can we do?
We could write our own version of dispatch (which is basically a wrapper) and call it every time.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">ourDispatch</span><span class="token punctuation">(</span>store<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dispatching'</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span>
  store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'new state'</span><span class="token punctuation">,</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>So every time we want to dispatch an action, we call <code class="language-text">ourDispatch</code> instead of <code class="language-text">store.dispatch</code>. But this will probably cause inconsistency in our project if we call <code class="language-text">store.dispatch</code> in some files and <code class="language-text">ourDispatch</code> in some others. We need a better solution.</p>
<p>Can we not modify <code class="language-text">store.dispatch</code> itself?</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> originalDispatch <span class="token operator">=</span> store<span class="token punctuation">.</span>dispatch
store<span class="token punctuation">.</span><span class="token function-variable function">dispatch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">ourDispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dispatching'</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span>
  <span class="token keyword">let</span> originalReturnValue <span class="token operator">=</span> <span class="token function">originalDispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'new state'</span><span class="token punctuation">,</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> originalReturnValue
<span class="token punctuation">}</span></code></pre></div>
<p>Here we copied the original version of <code class="language-text">store.dispatch</code> to <code class="language-text">originalDispatch</code>. Then we assign it our own definition. The original one take one argument (<code class="language-text">action</code>), so does ours. We also return the <code class="language-text">originalReturnValue</code>. May be, we do not know what original <code class="language-text">store.dispatch</code> was supposed to return, but we don‚Äôt want to pollute it‚Äôs old signature.</p>
<p>So we got what we wanted. But this is a bad approach. Because we are modifying things at our will, but we know things should only be <a href="https://en.wikipedia.org/wiki/Open%E2%80%93closed_principle">extended not modified</a>. But let‚Äôs keep it like this for a while.</p>
<h3 id="chaining-middlewares"><a href="#chaining-middlewares" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Chaining middlewares</h3>
<p>An important feature of middleware is chaining. How can we do that with what we have written so far?</p>
<p>Let‚Äôs say we want to add a common error catching behavior. That is- we want a common place where we can catch any thrown error.</p>
<p>We will modify <code class="language-text">dispatch</code> one more time:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> originalDispatch <span class="token operator">=</span> store<span class="token punctuation">.</span>dispatch
store<span class="token punctuation">.</span><span class="token function-variable function">dispatch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">ourDispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dispatching'</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span>
  <span class="token keyword">let</span> originalReturnValue <span class="token operator">=</span> <span class="token function">originalDispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'new state'</span><span class="token punctuation">,</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> originalReturnValue
<span class="token punctuation">}</span>

<span class="token comment">// now store.dispatch is modified</span>
<span class="token comment">// let's modify it one more time</span>
<span class="token keyword">const</span> modifiedDispatch <span class="token operator">=</span> store<span class="token punctuation">.</span>dispatch
store<span class="token punctuation">.</span><span class="token function-variable function">dispatch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">ourNewDispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> originalReturnValue <span class="token operator">=</span> <span class="token function">modifiedDispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
    <span class="token keyword">return</span> originalReturnValue
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Caught an exception!'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token keyword">throw</span> err
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We just copied and pasted the previous implementation of middleware. This would work. Every time we want to chain some more middleware, we keep copy and pasting in this format.</p>
<p>This works, but what if we decide our middlewares will no longer reside in a single file? Ideally such new functions will be in separate modules and might even come from third party packages. To facilitate that we should make <code class="language-text">store</code> a parameter. That way we can send <code class="language-text">store</code> and those middlewares would replace the <code class="language-text">store.dispatch</code> with their own implementation.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// in one file/package</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">patchStoreToAddLogging</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> currentDispatch <span class="token operator">=</span> store<span class="token punctuation">.</span>dispatch
  store<span class="token punctuation">.</span><span class="token function-variable function">dispatch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">ourDispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dispatching'</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span>
    <span class="token keyword">let</span> originalReturnValue <span class="token operator">=</span> <span class="token function">currentDispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'new state'</span><span class="token punctuation">,</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> originalReturnValue
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// in different file/package</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>store<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> currentDispatch <span class="token operator">=</span> store<span class="token punctuation">.</span>dispatch
  store<span class="token punctuation">.</span><span class="token function-variable function">dispatch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">ourNewDispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> originalReturnValue <span class="token operator">=</span> <span class="token function">currentDispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
      <span class="token keyword">return</span> originalReturnValue
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Caught an exception!'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
      <span class="token keyword">throw</span> err
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Now even if these functions are published as separate modules, we can call them easily after one another:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// after import from files/packages</span>
<span class="token function">patchStoreToAddLogging</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span>
<span class="token function">patchStoreToSupportErrorHandling</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span></code></pre></div>
<p>Good, now we have chained middlewares.</p>
<h3 id="better-implementation"><a href="#better-implementation" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Better implementation</h3>
<p>Now let‚Äôs go back to our previous problem. We don‚Äôt want to modify the library function <code class="language-text">store.dispatch</code> like this. What else could we do? Instead of modifying the current version ‚Äòin-place‚Äô, we could just return the new version of the <code class="language-text">store.dispatch</code>. This technique is actually called <a href="https://stackoverflow.com/questions/36314/what-is-currying">Currying</a> and pretty common in JS.</p>
<div class="gatsby-highlight" data-language="diff"><pre class="language-diff"><code class="language-diff">export function patchStoreToAddLogging(store) {
  const currentDispatch = store.dispatch
<span class="token deleted">- store.dispatch = function ourDispatch(action) {</span>
<span class="token inserted">+ return function ourDispatch(action) {</span>
    console.log('dispatching', action)
    let originalReturnValue = currentDispatch(action)
    console.log('new state', store.getState())
    return originalReturnValue
  }
}

export function patchStoreToSupportErrorHandling(store) {
  const currentDispatch = store.dispatch
<span class="token deleted">- store.dispatch = function ourNewDispatch(action) {</span>
<span class="token inserted">+ return function ourNewDispatch(action) {</span>
    try {
      let originalReturnValue = currentDispatch(action)
      return originalReturnValue
    } catch (err) {
      console.error('Caught an exception!', err)
      throw err
    }
  }
}</code></pre></div>
<p>What good did it do? :/<br>
How would we ‚Äòchain‚Äô them without assigning them to <code class="language-text">store.dispatch</code> like this?</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">store<span class="token punctuation">.</span>dispatch <span class="token operator">=</span> <span class="token function">patchStoreToAddLogging</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span>
store<span class="token punctuation">.</span>dispatch <span class="token operator">=</span> <span class="token function">patchStoreToSupportErrorHandling</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span></code></pre></div>
<p>If we want to avoid assigning, in order to ‚Äòchain‚Äô them we have to pass the current version of <code class="language-text">store.dispatch</code> to each of them as argument. That way, the first function will get the original <code class="language-text">store.dispatch</code> and return a new version of <code class="language-text">store.dispatch</code>. This will go as argument to the second function so that can return a further modified version. Eventually we will receive a fully changed version of <code class="language-text">store.dispatch</code>. Instead of changing <code class="language-text">store.dispatch</code> itself we will create a copy of store at setup time with the last fully changed version of <code class="language-text">dispatch</code>.</p>
<p>So the final version of those two functions will look like this:</p>
<div class="gatsby-highlight" data-language="diff"><pre class="language-diff"><code class="language-diff">export function patchStoreToAddLogging(store) {
<span class="token deleted">-  const currentDispatch = store.dispatch</span>
<span class="token inserted">+  return function wrapDispatch(currentDispatch) {</span>
    return function ourDispatch(action) {
      console.log('dispatching', action)
      let originalReturnValue = currentDispatch(action)
      console.log('new state', store.getState())
      return originalReturnValue
    }
<span class="token inserted">+  }</span>
}

export function patchStoreToSupportErrorHandling(store) {
<span class="token deleted">-  const currentDispatch = store.dispatch</span>
<span class="token inserted">+  return function wrapDispatch(currentDispatch) {</span>
    return function ourNewDispatch(action) {
      try {
        let originalReturnValue = currentDispatch(action)
        return originalReturnValue
      } catch (err) {
        console.error('Caught an exception!', err)
        throw err
      }
    }
<span class="token inserted">+  }</span>
}</code></pre></div>
<p>Just one line of change in each function: <code class="language-text">currentDispatch</code> now comes as a argument, not from <code class="language-text">store</code>. This allows us to apply the desired chaining without assigning every time. With this we would get a new copy of <code class="language-text">store</code> object when we set things up at the beginning and work with that.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">let</span> dispatch <span class="token operator">=</span> store<span class="token punctuation">.</span>dispatch <span class="token comment">// original one</span>
dispatch <span class="token operator">=</span> <span class="token function">patchStoreToAddLogging</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">(</span>dispatch<span class="token punctuation">)</span>
dispatch <span class="token operator">=</span> <span class="token function">patchStoreToSupportErrorHandling</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">(</span>dispatch<span class="token punctuation">)</span>
<span class="token keyword">let</span> newStore <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> store<span class="token punctuation">,</span> <span class="token punctuation">{</span> dispatch <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>Of course we could loop over an array and still get that final fully wrapped <code class="language-text">dispatch</code>.</p>
<p>There we have it. We got a <code class="language-text">store</code> object for our app with both middleware installed.</p>
<h3 id="reduxs-applymiddleware"><a href="#reduxs-applymiddleware" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Redux‚Äôs applyMiddleware()</h3>
<p>Redux provides an utility called <code class="language-text">applyMiddleware</code> that would take care of calling our functions while setting up a store. <code class="language-text">createStore</code> takes an optional last argument for this purpose.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> appliedMiddlewares <span class="token operator">=</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>
  patchStoreToAddLogging<span class="token punctuation">,</span>
  patchStoreToSupportErrorHandling
<span class="token punctuation">)</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token function">combineReducers</span><span class="token punctuation">(</span>reducers<span class="token punctuation">)</span><span class="token punctuation">,</span> appliedMiddlewares<span class="token punctuation">)</span></code></pre></div>
<p>It will apply the middlewares and return to us the final version of <code class="language-text">store</code>.</p>
<h3 id="almost-there"><a href="#almost-there" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Almost there</h3>
<p>Now lets take a look again our middlewares. With ES6 arrow function they would look like this:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">patchStoreToAddLogging</span> <span class="token operator">=</span> store <span class="token operator">=></span> currentDispatch <span class="token operator">=></span> action <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dispatching'</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span>
  <span class="token keyword">let</span> originalReturnValue <span class="token operator">=</span> <span class="token function">currentDispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'new state'</span><span class="token punctuation">,</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> originalReturnValue
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">patchStoreToSupportErrorHandling</span> <span class="token operator">=</span> store <span class="token operator">=></span> currentDispatch <span class="token operator">=></span> action <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> originalReturnValue <span class="token operator">=</span> <span class="token function">currentDispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
    <span class="token keyword">return</span> originalReturnValue
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Caught an exception!'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token keyword">throw</span> err
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Traditionally <code class="language-text">currentDispatch</code> is often named <code class="language-text">next</code> (as this version of dispatch will be called next inside a middleware) and middlewares would look like this:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">middleware</span> <span class="token operator">=</span> store <span class="token operator">=></span> next <span class="token operator">=></span> action <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token operator">...</span>
    <span class="token operator">...</span>
    <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>I hope now you understand why there is that <code class="language-text">store =&gt; next =&gt; action</code> thingy in every redux middleware.</p>
<h3 id="we-must-return"><a href="#we-must-return" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>We must return</h3>
<p>I have seen a lot of tutorials online and several npm package‚Äôs source code that ship with middlewares that we can use in our projects and found out one crucial mistake in many such codes:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">middleware</span> <span class="token operator">=</span> store <span class="token operator">=></span> next <span class="token operator">=></span> action <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token operator">...</span>
    <span class="token operator">...</span>
    <span class="token function">next</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token comment">// we _must_ return!</span>
<span class="token punctuation">}</span></code></pre></div>
<p>They just call <code class="language-text">next</code> but doesn‚Äôt return the value. It has <strong>bad side effects</strong>:</p>
<p>As middlewares are chained together, if one of them forgets to return the value of <code class="language-text">next</code> call, it will return <code class="language-text">undefined</code> to the previous caller. There are many cases (specially with Async operations), where the return value is very important of the caller of <code class="language-text">dispatch</code>. I intend to write another blog post with a case study about this.</p>
<p>See you next time.</p>
<h2 id="further-reading"><a href="#further-reading" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Further reading</h2>
<ul>
<li><a href="https://hackernoon.com/currying-in-js-d9ddc64f162e">Currying in JS</a></li>
<li><a href="https://redux.js.org/advanced/middleware#seven-examples">7 examples of redux middlewares</a></li>
</ul></div></div><div style="margin:2rem 0"><i class="fa fa-tag fa-flip-horizontal" style="margin-right:0.5em;color:grey"></i><span class="badge tag"><a style="text-decoration:none;color:inherit" href="/blog/tags/middleware">middleware</a></span><span class="badge tag"><a style="text-decoration:none;color:inherit" href="/blog/tags/reduxjs">reduxjs</a></span></div><div><div style="float:left"><div class="Demo__container"><div class="Demo__some-network"><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--facebook Demo__some-network__share-button"><div style="width:32px;height:32px"><svg viewBox="0 0 64 64" width="32" height="32" class="social-icon social-icon--facebook "><g><circle cx="32" cy="32" r="31" fill="#3b5998"></circle></g><g><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></g></svg></div></div></div><div class="Demo__some-network"><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--twitter Demo__some-network__share-button"><div style="width:32px;height:32px"><svg viewBox="0 0 64 64" width="32" height="32" class="social-icon social-icon--twitter "><g><circle cx="32" cy="32" r="31" fill="#00aced"></circle></g><g><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></g></svg></div></div></div><div class="Demo__some-network"><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--linkedin Demo__some-network__share-button"><div style="width:32px;height:32px"><svg viewBox="0 0 64 64" width="32" height="32" class="social-icon social-icon--linkedin "><g><circle cx="32" cy="32" r="31" fill="#007fb1"></circle></g><g><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></g></svg></div></div></div><div class="Demo__some-network"><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--reddit Demo__some-network__share-button"><div style="width:32px;height:32px"><svg viewBox="0 0 64 64" width="32" height="32" class="social-icon social-icon--reddit "><g><circle cx="32" cy="32" r="31" fill="#5f99cf"></circle></g><g><path d="m 52.8165,31.942362 c 0,-2.4803 -2.0264,-4.4965 -4.5169,-4.4965 -1.2155,0 -2.3171,0.4862 -3.128,1.2682 -3.077,-2.0247 -7.2403,-3.3133 -11.8507,-3.4782 l 2.5211,-7.9373 6.8272,1.5997 -0.0102,0.0986 c 0,2.0281 1.6575,3.6771 3.6958,3.6771 2.0366,0 3.6924,-1.649 3.6924,-3.6771 0,-2.0281 -1.6575,-3.6788 -3.6924,-3.6788 -1.564,0 -2.8968,0.9758 -3.4357,2.3443 l -7.3593,-1.7255 c -0.3213,-0.0782 -0.6477,0.1071 -0.748,0.4233 L 32,25.212062 c -4.8246,0.0578 -9.1953,1.3566 -12.41,3.4425 -0.8058,-0.7446 -1.8751,-1.2104 -3.0583,-1.2104 -2.4905,0 -4.5152,2.0179 -4.5152,4.4982 0,1.649 0.9061,3.0787 2.2389,3.8607 -0.0884,0.4794 -0.1462,0.9639 -0.1462,1.4569 0,6.6487 8.1736,12.0581 18.2223,12.0581 10.0487,0 18.224,-5.4094 18.224,-12.0581 0,-0.4658 -0.0493,-0.9248 -0.1275,-1.377 1.4144,-0.7599 2.3885,-2.2304 2.3885,-3.9406 z m -29.2808,3.0872 c 0,-1.4756 1.207,-2.6775 2.6894,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 -1.4824,0 -2.6894,-1.2002 -2.6894,-2.6758 z m 15.4037,7.9373 c -1.3549,1.3481 -3.4816,2.0043 -6.5008,2.0043 l -0.0221,-0.0051 -0.0221,0.0051 c -3.0209,0 -5.1476,-0.6562 -6.5008,-2.0043 -0.2465,-0.2448 -0.2465,-0.6443 0,-0.8891 0.2465,-0.2465 0.6477,-0.2465 0.8942,0 1.105,1.0999 2.9393,1.6337 5.6066,1.6337 l 0.0221,0.0051 0.0221,-0.0051 c 2.6673,0 4.5016,-0.5355 5.6066,-1.6354 0.2465,-0.2465 0.6477,-0.2448 0.8942,0 0.2465,0.2465 0.2465,0.6443 0,0.8908 z m -0.3213,-5.2615 c -1.4824,0 -2.6877,-1.2002 -2.6877,-2.6758 0,-1.4756 1.2053,-2.6775 2.6877,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 z" fill="white"></path></g></svg></div></div></div><div class="Demo__some-network"><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--email Demo__some-network__share-button"><div style="width:32px;height:32px"><svg viewBox="0 0 64 64" width="32" height="32" class="social-icon social-icon--email "><g><circle cx="32" cy="32" r="31" fill="#7f7f7f"></circle></g><g><path d="M17,22v20h30V22H17z M41.1,25L32,32.1L22.9,25H41.1z M20,39V26.6l12,9.3l12-9.3V39H20z" fill="white"></path></g></svg></div></div></div></div></div></div><div style="clear:both;margin-top:7rem"><hr/><div style="display:flex;margin-bottom:2.5rem"><img src="/static/avatar-a6e512818f4a219ac8465adb739d71fb.jpg" alt="Meha Masum" style="margin-right:1rem;margin-bottom:0;width:60px;height:60px;border-radius:5%"/><div>Personal blog by<!-- --> <strong><a href="/">Mehedi Hasan Masum</a>. </strong><br/>Software engineer based in Dhaka<br/><span style="font-size:80%"><a href="https://twitter.com/mehamasum" target="_blank"><i class="fa fa-twitter" style="color:#1da1f2;margin-right:0.25em"></i>@mehamasum</a></span></div></div></div><div></div></div></div></div></div><footer style="background:#ffffff;color:#000000;padding-top:4em;padding-bottom:4em"><div class="container"><div class="footer-left-panel col-md-6 col-xs-12"><span style="margin:0;font-size:0.8em;text-transform:uppercase;letter-spacing:2px">Made by <a href="/#"> meha</a> <i class="fa fa-heart" style="color:red"></i></span></div><div class="footer-right-panel col-md-6 col-xs-12"><a href="https://github.com/mehamasum/gatsby-blog" target="_blank"><i class="fa fa-code-fork" style="margin-right:0.5rem"></i>Fork me on Github</a></div></div></footer></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-106861471-1', 'auto', {});
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-post-js","jsonName":"blog-2018-12-dear-middlewares-d0c","path":"/blog/2018/12/dear-middlewares/"};window.dataPath="20/path---blog-2018-12-dear-middlewares-d-0-c-132-tkZQQzMsp4QdEdY82sABp9LEI";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.4dfccad11c1e34419570.css","/app-a25f4231e509debba9c9.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-ec7d97234f94a4506ba1.js"],"component---src-templates-post-js":["/component---src-templates-post-js.d1f0d49507b56cab667c.css","/component---src-templates-post-js-2e1e373cf9d1a9c55942.js"],"component---src-templates-blog-list-template-js":["/component---src-templates-blog-list-template-js-3cbe774014a651cf8c52.js"],"component---src-templates-list-tag-template-js":["/component---src-templates-list-tag-template-js-5a9b7823dc979c601dbe.js"],"component---src-templates-list-category-template-js":["/component---src-templates-list-category-template-js-5be703544d2650951d6d.js"],"component---src-pages-404-js":["/component---src-pages-404-js-b3d58083bfe527132df4.js"],"component---src-pages-index-js":["/component---src-pages-index-js-e6611f0f6076a86d605d.js"],"component---src-pages-resume-js":["/component---src-pages-resume-js-14d6d746be12f4236283.js"],"pages-manifest":["/pages-manifest-f42b9d43fce57985c81c.js"]};/*]]>*/</script><script src="/component---src-templates-post-js-2e1e373cf9d1a9c55942.js" async=""></script><script src="/14-8470f664f73d92ac0e2c.js" async=""></script><script src="/1-621ad53d2636efeb4f3f.js" async=""></script><script src="/0-54160a0a4e16653bd926.js" async=""></script><script src="/app-a25f4231e509debba9c9.js" async=""></script><script src="/webpack-runtime-0cc2b0296623acc76d5d.js" async=""></script></body></html>